#!/usr/bin/bash

#
# ARG1 is the source folder where default settings are located.
# ARG2 is the destination folder, where the new directories will be created.
#

# Running experiments recursively from an input top directory.
for i in `find $1/inputs -type d -links 2`
do for j in `find $1/queries -type d -links 2`
    do for k in `find $1/schemas -type d -links 2`
	do for l in tpch_001 #tpch_0001 tpch_001 tpch_01 tpch_1
	    do directory="$2/$i/$l/$k/$j/"
	       mkdir -p $directory
	       cp $i/case.properties $directory
	       cp $j/query.xml $directory
	       cp $k/schema.xml $directory
	       sed -i "s/tpch_001/$l/g" $directory/schema.xml
	    done
	done
    done
done
