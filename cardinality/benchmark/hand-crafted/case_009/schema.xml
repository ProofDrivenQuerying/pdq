<?xml version="1.0" encoding="UTF-8"?>
<schema>
	<sources>
		<source name="tpch" discoverer="uk.ac.ox.cs.pdq.sql.PostgresqlSchemaDiscoverer"
			url="jdbc:postgresql://localhost/" database="tpch_0001" username="root"
			password="root" />
	</sources>
	<relations>
		<relation name="customer" source="tpch">
		</relation>
		<relation name="part" source="tpch">
		</relation>
		<relation name="supplier" source="tpch">
		</relation>
		<relation name="partsupp" source="tpch">
		</relation>
		<relation name="nation" source="tpch">
		</relation>
		<relation name="region" source="tpch">
		</relation>
		<relation name="orders" source="tpch">
		</relation>
		<relation name="lineitem" source="tpch">
		</relation>
		<!-- <relation name="v1" source="tpch"> </relation> <relation name="v2" 
			source="tpch"> </relation> -->


		<view name="v1">
			<attribute name="partkey" type="java.lang.Integer" />
			<attribute name="suppkey" type="java.lang.Integer" />
		</view>

		<view name="v2">
			<attribute name="partkey" type="java.lang.Integer" />
			<attribute name="suppkey" type="java.lang.Integer" />
		</view>
		
 
	</relations>
	<dependencies>

		<!--CREATE VIEW V12 WITH SCHEMABINDING AS SELECT PARTSUPP.PS_PARTKEY, PARTSUPP.PS_SUPPKEY 
			FROM dbo.PARTSUPP, dbo.PART WHERE PARTSUPP.PS_PARTKEY = PART.P_PARTKEY AND 
			PART.P_MFGR = 'Manufacturer#1' AND PART.P_BRAND = 'Brand#13'; -->
		
		<dependency>
			<body>
				<atom name="v1">
					<variable name="partkey" />
					<variable name="suppkey" />
				</atom>
			</body>
			<head>
				<atom name="part">
					<variable name="partkey" />
					<variable name="pname" />
					<constant value="Manufacturer1" />
					<constant value="Brand13" />
					<variable name="ptype" />
					<variable name="psize" />
					<variable name="pcontainer" />
					<variable name="pretailprice" />
					<variable name="pcomment" />
				</atom>

				<atom name="partsupp">
					<variable name="partkey" />
					<variable name="suppkey" />
					<variable name="psavailqty" />
					<variable name="supplycost" />
					<variable name="pscomment" />
				</atom>
			</head>
		</dependency>
		<dependency>
			<body>
				<atom name="part">
					<variable name="partkey" />
					<variable name="pname" />
					<constant value="Manufacturer1" />
					<constant value="Brand13" />
					<variable name="ptype" />
					<variable name="psize" />
					<variable name="pcontainer" />
					<variable name="pretailprice" />
					<variable name="pcomment" />
				</atom>

				<atom name="partsupp">
					<variable name="partkey" />
					<variable name="suppkey" />
					<variable name="psavailqty" />
					<variable name="supplycost" />
					<variable name="pscomment" />
				</atom>
			</body>
			<head>
				<atom name="v1">
					<variable name="partkey" />
					<variable name="suppkey" />
				</atom>
			</head>
		</dependency>


		<!-- CREATE VIEW V13 WITH SCHEMABINDING AS SELECT PARTSUPP.PS_PARTKEY, 
			PARTSUPP.PS_SUPPKEY FROM dbo.PARTSUPP, dbo.SUPPLIER WHERE PARTSUPP.PS_SUPPKEY 
			= SUPPLIER.S_SUPPKEY AND SUPPLIER.S_ACCTBAL > 2000; -->
		
		<dependency>
			<body>
				<atom name="v2">
					<variable name="partkey" />
					<variable name="suppkey" />
				</atom>
			</body>
			<head>
				<atom name="partsupp">
					<variable name="partkey" />
					<variable name="suppkey" />
					<variable name="psavailqty" />
					<variable name="supplycost" />
					<variable name="pscomment" />
				</atom>

				<atom name="supplier">
					<variable name="suppkey" />
					<variable name="sname" />
					<variable name="saddress" />
					<variable name="nkey" />
					<variable name="sphone" />
					<constant value="2000" />
					<variable name="scomment" />
				</atom>
			</head>
		</dependency>
		<dependency>
			<body>
				<atom name="partsupp">
					<variable name="partkey" />
					<variable name="suppkey" />
					<variable name="psavailqty" />
					<variable name="supplycost" />
					<variable name="pscomment" />
				</atom>

				<atom name="supplier">
					<variable name="suppkey" />
					<variable name="sname" />
					<variable name="saddress" />
					<variable name="nkey" />
					<variable name="sphone" />
					<constant value="2000" />
					<variable name="scomment" />
				</atom>
			</body>
			<head>
				<atom name="v2">
					<variable name="partkey" />
					<variable name="suppkey" />
				</atom>
			</head>
		</dependency>
		 
		 
	</dependencies>
</schema>
